# eggs-dev
---
name: eggs-dev
description: "add repositories: nodesource, antigravity, install: nodejs, antigravity"
author: artisan
distributions:
  # debian
  - bullseye
  - bookworm
  - trixie
  # devuan
  - beowulf
  - chimaera
  - daedalus
  # ubuntu
  - focal
  - jammy
  - noble
  - raccoon
sequence:
  repositories:
    sources_list:
      - main
    sources_list_d:
      - rm -f /usr/share/keyrings/antigravity.gpg
      - >-
          curl -fsSL "https://us-central1-apt.pkg.dev/doc/repo-signing-key.gpg" | gpg
          --dearmor -o /usr/share/keyrings/antigravity.gpg
      - >-
          echo "deb [signed-by=/usr/share/keyrings/antigravity.gpg]
          https://us-central1-apt.pkg.dev/projects/antigravity-auto-updater-dev/ antigravity-debian main" | tee
          /etc/apt/sources.list.d/antigravity.list > /dev/null

      - rm -f /usr/share/keyrings/nodesource.gpg
      - >-
          curl -fsSL https://deb.nodesource.com/gpgkey/nodesource.gpg.key | gpg
          --dearmor -o /usr/share/keyrings/nodesource.gpg > /dev/null
      - >-
          . /etc/os-release && echo "deb [signed-by=/usr/share/keyrings/nodesource.gpg]
          https://deb.nodesource.com/node_22.x ${VERSION_CODENAME} main" | tee
          /etc/apt/sources.list.d/nodesource.list > /dev/null
    update: true
    upgrade: true
  packages:
    - antigravity
    - nodejs
    # python tools for pengui
    - ccache
    - libxcb-cursor0
    - patchelf
    # python-is-python3
    - python3-dev
    - python3-pip
    - python3-venv
    # ruby
    - ruby
finalize:
  cmds:
    - echo -e "\n# wardrobe\nfs.inotify.max_user_watches=524288" >> /etc/sysctl.conf
    - npm i pnpm -g
    - sudo -u ${SUDO_USER} pnpm completion bash > ~/completion-for-pnpm.bash
    - sudo -u ${SUDO_USER} echo 'source ~/completion-for-pnpm.bash' >> ~/.bashrc
    - gem install fpm
    - ../../scripts/tools-jq.sh
